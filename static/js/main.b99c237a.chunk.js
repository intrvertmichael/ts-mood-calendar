(this["webpackJsonpts-app"]=this["webpackJsonpts-app"]||[]).push([[0],{200:function(e,t,n){e.exports=n(407)},205:function(e,t,n){},206:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},407:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(76),c=n.n(o),u=(n(205),n(206),n(4)),l=n(16),s=(n(358),n(50)),m=n.n(s),i=function(){return function(e,t,n){var a,r=n.getFirestore,o=t().firebase.auth.uid,c=t().calendar;a=t().firestore.data.userCalendars[o]?t().firestore.data.userCalendars[o].stored:{},console.log("- - - - -- - - -"),console.log(c),console.log(a);var u=m.a.isEqual(c,a);if(console.log(u),!u){e({type:"FIREBASE_LOADED"});var l=r();t().current.timesFirestoreLoaded<=1&&null===t().current.day?e({type:"SYNC_WITH_FIREBASE",calendar:a}):l.collection("userCalendars").doc(o).update({stored:c,lastUpdateAt:new Date}).then((function(){return console.log(!0,"updated Firestore")})).catch((function(){return console.log("Not able to updated Firestore")})),e({type:"UPDATE_CURRENT_MONTH",month:t().current.month})}}},d=function(e){return function(t,n){return t({type:"UPDATE_CURRENT_MONTH",month:e})}},h=Object(u.b)((function(e){var t=e.current.month;return{month:e.calendar.year2020["month".concat(t)],allMonths:e.calendar.year2020,year:e.current.year}}),(function(e){return{LogOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){console.log("Signed Out..."),e({type:"LOG_OUT"}),e({type:"RESET_APP"})}))}))},updateCurrentMonth:function(t){return e(d(t))}}}))((function(e){var t=Object.entries(e.allMonths),n=[];t.map((function(t){t[1].num!==e.month.num&&n.push(r.a.createElement("li",{key:t[1].num+10,onClick:function(){return a(t[1].num)}},t[1].name))}));var a=function(t){e.updateCurrentMonth(t)};return r.a.createElement("div",{className:"header"},n.length>0?r.a.createElement("div",{className:"clickable-title",onClick:function(){return function(){var e=document.querySelector(".all-months");null===e||void 0===e||e.classList.toggle("grow")}()}},e.month.name," | 2021"):r.a.createElement("div",{className:"title"},e.month?e.month.name:""," | 2021"),r.a.createElement("button",{onClick:function(){return e.LogOut()}},"Log Out"),r.a.createElement("div",{className:"all-months"},n),r.a.createElement("div",{className:"day-labels"},r.a.createElement("ul",null,r.a.createElement("li",null,"S"),r.a.createElement("li",null,"M"),r.a.createElement("li",null,"T"),r.a.createElement("li",null,"W"),r.a.createElement("li",null,"Th"),r.a.createElement("li",null,"F"),r.a.createElement("li",null,"S"))))})),y=(n(359),n(360),Object(u.b)((function(e){var t=e.current.month;return{month:e.calendar.year2020["month".concat(t)],labeledDays:e.calendar.year2020["month".concat(t)].days,starts:e.calendar.year2020["month".concat(t)].starts}}),(function(e){return{updateCurrentDay:function(t){return e(function(e){return function(t,n){t({type:"UPDATE_MODAL"}),t({type:"UPDATE_CURRENT_DAY",day:e})}}(t))}}}))((function(e){var t=0;e.labeledDays&&Object.keys(e.labeledDays).map((function(n){var a=e.pos;"day".concat(a)===n&&(t=e.labeledDays[n].mood)}));var n=t,a="single-day ",o=new Date,c=o.getDate(),u=o.getMonth();e.pos&&e.starts>=0&&(u===e.month.num&&c===e.pos&&(a+="currentDay "),null!==n&&(a+="mood".concat(n)));return r.a.createElement("div",{className:a,onClick:function(){e.updateCurrentDay(e.pos)}},e.pos)}))),E=Object(u.b)((function(e){var t=e.current.month;return{month:e.calendar.year2020["month".concat(t)]}}))((function(e){var t=[];if(e.month){var n,a=e.month.starts+e.month.length;n=a<=28?28:a<=35?35:42;for(var o=0;o<n;o++)o>=e.month.starts&&o<e.month.length+e.month.starts?t.push(r.a.createElement(y,{key:o,pos:o-e.month.starts+1})):t.push(r.a.createElement("div",{className:"not-day",key:o}))}return r.a.createElement("div",{className:"days"}," ",t," ")})),f=Object(u.b)((function(e){return console.log("state",e),{year:e.current.year,month:e.current.month,uid:e.firebase.auth.uid,userCalendars:e.firestore.data.userCalendars}}),(function(e){return{updateCurrentMonth:function(t){return e(d(t))},addMonth:function(t){return e(function(e){return function(t,n){t({type:"CREATE_MONTH",monthName:"month".concat(e.num),month:e})}}(t))},syncFirebase:function(){return e(i())}}}))((function(e){Object(l.useFirestoreConnect)("userCalendars");var t=e.addMonth,n=e.updateCurrentMonth;return Object(a.useEffect)((function(){var e=function(e){return[{num:0,name:"January",length:31,starts:5,days:{}},{num:1,name:"February",length:28,starts:1,days:{}},{num:2,name:"March",length:31,starts:1,days:{}},{num:3,name:"April",length:30,starts:3,days:{}},{num:4,name:"May",length:31,starts:6,days:{}},{num:5,name:"June",length:30,starts:2,days:{}},{num:6,name:"July",length:31,starts:4,days:{}},{num:7,name:"August",length:31,starts:0,days:{}},{num:8,name:"September",length:30,starts:3,days:{}},{num:9,name:"October",length:31,starts:5,days:{}},{num:10,name:"November",length:30,starts:1,days:{}},{num:11,name:"December",length:31,starts:3,days:{}}][e]}((new Date).getMonth());t(e),n(e.num)}),[t,n]),Object(a.useEffect)((function(){e.userCalendars&&e.month>=0&&e.syncFirebase()}),[e]),r.a.createElement("div",{className:"calendar"},e.month>=0?r.a.createElement(h,null):"",e.month>=0?r.a.createElement(E,null):"",e.month>=0?r.a.createElement("div",{className:"mood-labels"},r.a.createElement("ul",null,r.a.createElement("li",{className:"mood1"}," Bad "),r.a.createElement("li",{className:"mood2"}," Okay "),r.a.createElement("li",{className:"mood3"}," Good "),r.a.createElement("li",{className:"mood4"}," Excellent "))):"")})),b=(n(361),n(198)),g=n.n(b),p=Object(u.b)((function(e){return{calendar:e,current:e.current.modalOpen,loggedIn:e.firebase.auth.uid}}),(function(e){return{LogIn:function(){return e((function(e,t,n){(0,n.getFirebase)().login({provider:"google",type:"popup"}).then((function(){return console.log("Logged in...")})).catch((function(){return console.log("Log in failed")}))}))}}}))((function(e){return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-message"},r.a.createElement("h1",null,"Mood Calendar"),r.a.createElement("p",null,"Keep track of your mood and what's going on.")),r.a.createElement("div",{className:"login-btn"},r.a.createElement(g.a,{type:"light",onClick:function(){return e.LogIn()}})))})),O=(n(364),n(365),function(e){return 1===e?"bad":2===e?"okay":3===e?"good":4===e?"excellent":"You don't have a mood for this day"}),N=Object(u.b)((function(e){var t=e.current.month;return{cal:e.calendar.year2020,currentMonth:e.calendar.year2020["month".concat(t)],currentDay:e.current.day}}),(function(e){return{resetCurrent:function(){return e((function(e,t){return e({type:"RESET_CURRENT"})}))},addMood:function(t){return e(function(e){return function(t,n){var a=n().current.month;t({type:"CREATE_MOOD",monthName:"month".concat(n().calendar.year2020["month".concat(a)].num),dayName:"day".concat(n().current.day),mood:e})}}(t))},addMessage:function(t){return e(function(e){return function(t,n){var a=n().current.month;t({type:"CREATE_MESSAGE",monthName:"month".concat(n().calendar.year2020["month".concat(a)].num),dayName:"day".concat(n().current.day),message:e})}}(t))},deleteDay:function(){return e((function(e,t){var n=t().current.month;e({type:"DELETE_DAY",monthName:"month".concat(t().calendar.year2020["month".concat(n)].num),dayName:"day".concat(t().current.day)})}))},syncFirebase:function(){return e(i())}}}))((function(e){var t,n=0,a="",o=function(t){e.addMood(t),e.syncFirebase()},c=e.cal["month".concat(e.currentMonth.num)];return c&&c.days["day".concat(e.currentDay)]&&(n=c.days["day".concat(e.currentDay)].mood?c.days["day".concat(e.currentDay)].mood:0,a=c.days["day".concat(e.currentDay)].message?c.days["day".concat(e.currentDay)].message:""),t=n?"You were feeling "+O(n)+" on ".concat(e.currentMonth.name," ").concat(e.currentDay):"You don't have a mood for this day",r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal mood".concat(n)},r.a.createElement("button",{className:"modal-btn",onClick:function(){return e.resetCurrent()}},"X"),r.a.createElement("div",{className:"modal-content"},r.a.createElement("p",{className:"date"}," ",t," "),r.a.createElement("button",{className:"message",onClick:function(){return function(){var t=prompt("what was going on in ".concat(e.currentMonth.name," ").concat(e.currentDay," ?"),a);e.addMessage(t),e.syncFirebase()}()}},""!==a?a:"What's happening on this day")),r.a.createElement("div",{className:"mood-circles"},r.a.createElement("button",{className:"mood1",onClick:function(){return o(1)}},"Bad"),r.a.createElement("button",{className:"mood2",onClick:function(){return o(2)}},"Okay"),r.a.createElement("button",{className:"mood3",onClick:function(){return o(3)}},"Good"),r.a.createElement("button",{className:"mood4",onClick:function(){return o(4)}},"Excellent")),r.a.createElement("button",{className:"clear-btn",onClick:function(){e.deleteDay(),e.syncFirebase()}},"Reset")))})),v=Object(u.b)((function(e){return{calendar:e,current:e.current.modalOpen,loggedIn:e.firebase.auth.uid}}),(function(e){return{}}))((function(e){return r.a.createElement("div",{className:"container"},e.current?r.a.createElement(N,null):"",e.loggedIn?r.a.createElement(f,null):r.a.createElement(p,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=n(17),C=n(199),T=n(27),_=n(15),A=n(9),M={year2020:{}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MONTH":return Object(A.b)(e,{year2020:Object(_.a)({},t.monthName,t.month)});case"CREATE_DAY":return Object(A.b)(e,{year2020:Object(_.a)({},t.monthName,{days:t.day})});case"CREATE_MOOD":return Object(A.b)(e,{year2020:Object(_.a)({},t.monthName,{days:Object(_.a)({},t.dayName,{mood:t.mood})})});case"CREATE_MESSAGE":return Object(A.b)(e,{year2020:Object(_.a)({},t.monthName,{days:Object(_.a)({},t.dayName,{message:t.message})})});case"DELETE_DAY":var n=m.a.cloneDeep(e);return m.a.unset(n,"year2020.".concat(t.monthName,".days.").concat(t.dayName)),n;case"SYNC_WITH_FIREBASE":return Object(A.b)(e,t.calendar);case"LOG_OUT":return{year2020:{}};default:return e}},j=n(123),F={modalOpen:!1,year:2020,month:0,day:null,timesFirestoreLoaded:0},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FIREBASE_LOADED":return Object(j.a)(Object(j.a)({},e),{},{timesFirestoreLoaded:e.timesFirestoreLoaded+1});case"UPDATE_MODAL":return Object(A.c)(e,["modalOpen"],!e.modalOpen);case"UPDATE_CURRENT_MONTH":return Object(A.c)(e,["month"],t.month);case"UPDATE_CURRENT_DAY":return Object(A.c)(e,["day"],t.day);case"RESET_CURRENT":return Object(A.a)(e,{modalOpen:!1,day:null});case"RESET_APP":return Object(A.a)(e,{modalOpen:!1,month:0,day:null,timesFirestoreLoaded:0});default:return e}},L=Object(D.c)({calendar:R,current:k,firestore:T.firestoreReducer,firebase:l.firebaseReducer}),S=n(38),w=n.n(S),I=(n(401),n(405),{apiKey:"AIzaSyAL5D8qMwLeApe00CIkXjT8RTKetz1l8uM",authDomain:"mood-calendar-91494.firebaseapp.com",databaseURL:"https://mood-calendar-91494.firebaseio.com",projectId:"mood-calendar-91494",storageBucket:"mood-calendar-91494.appspot.com",messagingSenderId:"1040700958396",appId:"1:1040700958396:web:4f2829334b1152a736d2b9"});w.a.initializeApp(I),w.a.firestore();var U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||D.d,P=Object(D.e)(L,U(Object(D.a)(C.a.withExtraArgument({getFirestore:T.getFirestore,getFirebase:l.getFirebase})),Object(T.reduxFirestore)(w.a))),Y={firebase:w.a,config:I,dispatch:P.dispatch,createFirestoreInstance:T.createFirestoreInstance};c.a.render(r.a.createElement(u.a,{store:P},r.a.createElement(l.ReactReduxFirebaseProvider,Y,r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[200,1,2]]]);
//# sourceMappingURL=main.b99c237a.chunk.js.map